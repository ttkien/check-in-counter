<html>

<head>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
</head>

<body>
    <div class="row">
        <div class="column">
            <table>
                <tr>
                    <td>Average number of customers arrivals onver an hour</td>
                    <td>
                        <input type="text" name="lamda" />
                    </td>
                </tr>
                <tr>
                    <td>Employee productivity</td>
                    <td>
                        <table>
                            <tr>
                                <td>Employee name</td>
                                <td>Unit</td>
                                <td>Working hours</td>
                                <td>Wage ($/hour)</td>
                            </tr>
                            <tr>
                                <td>Employee1</td>
                                <td><input type="text" name="employee1_unit" class="unit" /></td>
                                <td><input type="text" name="employee1_workinghours" class="workinghours" /></td>
                                <td> <input type="text" name="employee1_wage" class="wage" /></td>
                            </tr>
                            <tr>
                                <td>Employee2</td>
                                <td><input type="text" name="employee2_unit" class="unit" /></td>
                                <td><input type="text" name="employee2_workinghours" class="workinghours" /></td>
                                <td> <input type="text" name="employee2_wage" class="wage" /></td>
                            </tr>
                            <tr>
                                <td>Employee3</td>
                                <td><input type="text" name="employee3_unit" class="unit" /></td>
                                <td><input type="text" name="employee3_workinghours" class="workinghours" /></td>
                                <td> <input type="text" name="employee3_wage" class="wage" /></td>
                            </tr>
                            <tr>
                                <td>Employee4</td>
                                <td><input type="text" name="employee4_unit" class="unit" /></td>
                                <td><input type="text" name="employee4_workinghours" class="workinghours" /></td>
                                <td> <input type="text" name="employee4_wage" class="wage" /></td>
                            </tr>
                            <tr>
                                <td>Total</td>
                                <td><input type="text" name="total_unit" readonly /></td>
                                <td><input type="text" name="total_workinghours" readonly /></td>
                                <td><input type="text" name="total_wage" readonly /></td>
                            </tr>
                            <tr>
                                <td colspan="3" style="text-align:center;margin: auto">
                                    <div><button onclick="onCalculate();">Calculate</button></div>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td></td>
                </tr>

            </table>

        </div>
        <div class="column">

            <table>
                <tr>
                    <td>Average number of customer inqueue</td>
                    <td id="average_numer_in_queue"></td>
                </tr>
                <tr>
                    <td>Average waiting and service time</td>
                    <td id="average_waiting_and_service_time"></td>
                </tr>

            </table>
        </div>
    </div>
</body>
<script type="text/javascript">
    let e = 2.71828

    function factorial(num) {
        var rval = 1;
        for (var i = 2; i <= num; i++)
            rval = rval * i;
        return rval;
    }
    function calculatePoissonDistrution(x, lamda) {
        let fractorialOfX = factorial(x);
        let quotient = Math.pow(lamda, x) * Math.pow(e, (0 - lamda));

        return quotient / fractorialOfX
    }

    function calculateExponentialProbabilityDistribution(t, u) {
        return 1 - Math.pow(e, (0 - u * t))
    }

    function calculateAverageNumberInQueue(lamda, u) {
        return Math.pow(lamda, 2) / (u * (u - lamda))
    }

    function calculateAverageWaitingAndServiceTime(lamda, u) {
        let a =  (u * (u - lamda))
        console.log(a);
        let b = 1/u
        console.log(b);

        return (lamda / a)  + b
    }

    function onCalculate() {
        let count = 4;
        let totalUnit = 0;
        let totalWorkingHours = 0;
        let totalSalary = 0;

        for (var i = 1; i <= count; i++) {
            let unit = $("*[name='employee" + i + "_unit']").val();
            let workingHours = $("*[name='employee" + i + "_workinghours']").val();
            let wage = $("*[name='employee" + i + "_wage']").val();

            let isInvalue = unit == '' || workingHours == '' || wage == ''
            if (isInvalue == false) {
                totalUnit += unit;
                totalWorkingHours += workingHours;
                totalSalary = workingHours * wage;
            }
        }

        $("*[name='total_unit']").val(totalUnit);
        $("*[name='total_workinghours']").val(totalWorkingHours);
        $("*[name='total_wage']").val(totalSalary);

        let u = totalUnit / totalWorkingHours;
        let lamda = $("*[name='lamda']").val()

        let average_numer_in_queue = calculateAverageNumberInQueue(lamda, u);
        $("*[id='average_numer_in_queue']").html(average_numer_in_queue);

        let average_waiting_and_service_time = calculateAverageWaitingAndServiceTime(lamda, u);
        $("*[id='average_waiting_and_service_time']").html(average_waiting_and_service_time);
    }

</script>
<style>
    .column {
        float: left;
        width: 50%;
    }

    /* Clear floats after the columns */
    .row:after {
        content: "";
        display: table;
        clear: both;
    }
</style>

</html>